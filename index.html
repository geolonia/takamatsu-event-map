<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>たかまつエリアマップ</title>
  <link rel="stylesheet" href="./style.css">
  <script src="https://kit.fontawesome.com/5a581d1c6f.js" crossorigin="anonymous"></script>
</head>

<body>
  <header>
    <div class="header-title">たかまつエリアマップ</div>
    <div class="hamburger-menu">
      <input type="checkbox" id="menu-btn-check">
      <label for="menu-btn-check" class="menu-btn"><span></span></label>
      <div class="menu-content">
        <div class="menu-header">
          <div class="menu-title">MENU</div>
        </div>
        <ul>
          <li>
            <details>
              <summary>個人情報の取り扱いについて</summary>
              <p>当サイトでは、個人情報の収集や利用又は提供、管理について「高松市個人情報保護条例」に基づき、次のとおり適切に取り扱います。</p>

              <p>個人情報とは</p>
              <p>
                個人に関する情報であって、当該情報に含まれる氏名、生年月日その他の記述等により特定の個人を識別することができるもの（他の情報と照合することができ、それにより特定の個人を識別することができることとなるものを含む。）をいいます。
              </p>

              <p>収集する情報の範囲</p>
              <p>当サイトで収集する情報の範囲は、次のとおりとします。</p>
            </details>
          </li>
          <li>
            <details>
              <summary>メニュー2</summary>
              <p>メニュー2のコンテンツ</p>
            </details>
          </li>
          <li>
            <details>
              <summary>メニュー3</summary>
              <p>メニュー3のコンテンツ</p>
            </details>
          </li>
        </ul>
        <div class="menu-footer">
          <div class="social-icons">
            <div class="social-icons-title">SOCIAL</div>
            <ul>
              <li>
                <a href="" target="_blank" rel="noopener noreferrer">
                  <img src="./img/facebook.png" alt="facebook">
                </a>
              </li>
              <li>
                <a href="" target="_blank" rel="noopener noreferrer">
                  <img src="./img/twitter.png" alt="twitter">
                </a>
              </li>
              <li>
                <a href="" target="_blank" rel="noopener noreferrer">
                  <img src="./img/line.png" alt="line">
                </a>
              </li>
              <li>
                <a href="" target="_blank" rel="noopener noreferrer">
                  <img src="./img/instagram.png" alt="instagram">
                </a>
              </li>
            </ul>
          </div>
          <hr class="divider">
          </hr>
          <div class="brand">
            <img class="logo" src="./img/logo.svg" alt="logo">
            <div class="brand-title">
              <span>Takamatsu City</span>
              <p>もっと高松</p>
            </div>
          </div>
          <div class="copy-right">Copyright © Takamatsu City, All rights reserved.</div>
        </div>
      </div>
    </div>
  </header>
  <div id="banner">
    <label id="banner-close"><span></span></label>
    <a href="" target="_blank" rel="noopener noreferrer">
      <div class="banner-title">BOULANGERIE PATISSERIE Risum <br />（ブーランジェリー パティスリー リズム）</div>
      <div class="banner-period">2022.05.05-2022.05.05</div>
      <div class="banner-description">一般社団法人「街角に音楽を@香川」主催の同イベント。2015（平成27）年から毎年開催し、サンポート高松をはじめ、市内各所で音楽ステージを開いてきた。</div>
    </a>
  </div>
  <div id="map" data-navigation-control="off" data-geolocate-control=""></div>
  <div class="icons">
    <!-- <img id="search-button" class="search" src="./img/search.svg" alt="search icon"> -->
    <!-- <img id="geolocate-button" src="./img/point.svg" alt="point icon"> -->
  </div>
  <div id="list">
    <label id="list-close"><span></span></label>
    <div id="list-content">
      <div id="content1">
        <div class="list-header">
          <i class="fa-sharp fa-solid fa-list"></i>
          <div class="title">イベントリスト</div>
        </div>
      </div>
      <div id="content2" style="display: none;">
        <div class="list-title">BOULANGERIE PATISSERIE Risum（ブーランジェリー パティスリー リズム）</div>
        <div class="list-period">2022.05.05-2022.05.05</div>
        <ul>
          <li>
            <img src="./img/time.svg" alt="time icon">
            <div>14:00~ 19:00</div>
          </li>
          <li>
            <img src="./img/place.svg" alt="place icon">
            <div>サンポート高松多目的広場 石のステージ</div>
          </li>
          <li>
            <img src="./img/transport.svg" alt="transport icon">
            <div>JR高松駅から徒歩3分</div>
          </li>
          <li class="display-block">
            <div class="list-description">
              一般社団法人「街角に音楽を@香川」主催の同イベント。
              2015（平成27)年から毎年開催し、サンポート高松をはじめ、市内各所で音楽ステージを開いてきた。
            </div>
            <div>
              <div>
                <span class="list-label">主催：</span>MUSIC BLUE TAKAMATSU 実行委員会
              </div>
              <div>
                <span class="list-label">連絡先：</span>087-xxx-xxxx
              </div>
            </div>
          </li>
          <li class="display-block">
            <div class="icon-container"><img src="./img/price.svg" alt="price icon">1,500円</div>
            <span class="list-price-description">大人1名1500円、子供1名500円(18歳以下）、65歳以上1名1000円</span>
          </li>
          <li>
            <img src="./img/target.svg" alt="target icon">
            <div>家族</div>
          </li>
          <li>
            <img src="./img/address.svg" alt="address icon">
            <div>香川県高松市サンポート3-33</div>
          </li>
        </ul>
        <div class="list-footer-content">
          <div class="box">
            <img src="./img/walk.svg" alt="walk icon">
            <div>ここへ行く</div>
          </div>
          <div class="box walk">
            <img src="./img/compass.svg" alt="compass icon">
            <div>Webサイト</div>
          </div>
          <div class="circle">
            <img src="./img/share.svg" alt="share icon">
          </div>
        </div>
      </div>
      <div id="search" style="display: none;">
        <div class="content-title"><i class="fa-solid fa-calendar-days"></i>開催日から探す</div>
        <div class="radio-button-group mts">
          <div class="item">
            <input type="radio" name="button-group" class="radio-button" value="1" id="button1" checked />
            <label for="button1">今日</label>
          </div>
          <div class="item">
            <input type="radio" name="button-group" class="radio-button" value="2" id="button2" />
            <label for="button2">明日</label>
          </div>
          <div class="item">
            <input type="radio" name="button-group" class="radio-button" value="3" id="button3" />
            <label for="button3">今週末</label>
          </div>
        </div>
        <div class="keyword-container">
          <input id="keyword" type="text" placeholder="キーワードで絞り込み">
          <i class="fa-solid fa-magnifying-glass"></i>
        </div>
        <button id="submit-button">絞り込み<i class="fa-solid fa-chevron-right"></i></button>
      </div>
      <div id="search-result">
        <div class="list-header">
          <div class="list-header-inner">
            <img src="./img/sports.svg" alt="sports icon">
            <div class="list-header-title">
              <div class="list-header-title-main">スポーツ・ウェルネス</div>
              <div class="list-header-title-sub">4件見つかりました</div>
            </div>
          </div>
          <div class="category-content">
            <div class="category-label active">音楽</div>
            <div class="category-label">ミュージック</div>
            <div class="category-label">ブルーフェス</div>
          </div>
        </div>
        <div class="list-section">
          <div class="list-title">BOULANGERIE PATISSERIE Risum（ブーランジェリー パティスリー リズム）</div>
          <div class="list-sub-title">スポーツ・ウェルネス</div>
          <div class="list-period">2022.05.05-2022.05.05</div>
          <ul>
            <li>
              <img src="./img/time.svg" alt="time icon">
              <div>14:00~ 19:00</div>
            </li>
            <li>
              <img src="./img/place.svg" alt="place icon">
              <div>サンポート高松 多目的広場 石のステージ</div>
            </li>
            <li>
              <img src="./img/transport.svg" alt="transport icon">
              <div>JR高松駅から徒歩3分</div>
            </li>
            <li>
              <div class="icon-container"><img src="./img/price.svg" alt="price icon">1,500円</div>
              <div class="icon-container"><img src="./img/target.svg" alt="target icon">家族</div>
            </li>
          </ul>
        </div>
        <div class="list-section">
          <div class="list-title">BOULANGERIE PATISSERIE Risum（ブーランジェリー パティスリー リズム）</div>
          <div class="list-sub-title">スポーツ・ウェルネス</div>
          <div class="list-period">2022.05.05-2022.05.05</div>
          <ul>
            <li>
              <img src="./img/time.svg" alt="time icon">
              <div>14:00~ 19:00</div>
            </li>
            <li>
              <img src="./img/place.svg" alt="place icon">
              <div>サンポート高松 多目的広場 石のステージ</div>
            </li>
            <li>
              <img src="./img/transport.svg" alt="transport icon">
              <div>JR高松駅から徒歩3分</div>
            </li>
            <li>
              <div class="icon-container"><img src="./img/price.svg" alt="price icon">1,500円</div>
              <div class="icon-container"><img src="./img/target.svg" alt="target icon">家族</div>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
  <script type="text/javascript"
    src="https://cdn.geolonia.com/v1/embed?geolonia-api-key=09cde899b70241ef958de8e2193c2b5a"></script>
  <script>

    const contentIds = ['content1', 'content2', 'search', 'search-result']
    const elements = contentIds.map(id => document.getElementById(id));

    const displayTargetElement = (targetId) => {
      elements.forEach(element => {
        if (element.id === targetId) {
          element.style.display = 'block';
        } else {
          element.style.display = 'none';
        }
      });
    }

    displayTargetElement('content1');

    const map = new geolonia.Map({
      container: 'map',
      zoom: 13.81,
      center: [134.04937, 34.34965],
      style: './style.json',
      localIdeographFontFamily: 'sans-serif',
    });

    map.addControl(new window.geolonia.GeolocateControl(), 'top-right');

    map.on('load', async () => {

      map.on('click', (e) => {

        listContent.classList.remove('search-result');

        const features = map.queryRenderedFeatures(e.point);
        if (features.length > 0) {
          const feature = features[0];
          const layerId = feature.layer.id;

          if (layerId === 'takamatsuarea') {
            list.style.height = '60vh';
            listCloseButton.style.display = 'flex';

            displayTargetElement('content2');

          } else {
            list.style.height = '10vh';
            listCloseButton.style.display = 'none';

            displayTargetElement('content1');
          }
        }
      })

    });

    const closeButton = document.getElementById('banner-close');
    closeButton.addEventListener('click', () => {
      document.getElementById('banner').style.display = 'none';
    });

    const list = document.getElementById('list');
    const listContent = document.getElementById('list-content');
    const listCloseButton = document.getElementById('list-close');

    list.addEventListener('click', () => {
      list.style.height = '60vh';
      listCloseButton.style.display = 'flex';
    });

    listCloseButton.addEventListener('click', () => {
      list.style.height = '10vh';
      listCloseButton.style.display = 'none';
      displayTargetElement('content1');

      listContent.classList.remove('search-result');

      event.stopPropagation();
    });

    const searchButton = document.getElementById('search-button');
    searchButton.addEventListener('click', () => {
      list.style.height = '60vh';
      listCloseButton.style.display = 'flex';
      displayTargetElement('search');
    });

    const searchResult = document.getElementById('submit-button');
    searchResult.addEventListener('click', () => {
      listCloseButton.style.display = 'flex';
      listContent.classList.add('search-result');
      displayTargetElement('search-result');
    });

  </script>
</body>

</html>